<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=utf-8">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="user-scalable=no, width=device-width, initial-scale=1, maximum-scale=1">
	<title>Morpheus</title>
	<link rel="stylesheet" href="https://software.broadinstitute.org/morpheus/css/morpheus-latest.min.css">
	<link rel="shortcut icon" href="https://software.broadinstitute.org/morpheus/favicon.ico" type="image/x-icon">
	<script type="text/javascript" src="https://software.broadinstitute.org/morpheus/js/morpheus-external-latest.min.js"></script>
	<script src="https://software.broadinstitute.org/morpheus/js/morpheus-latest.min.js"></script>
</head>
<body>
<noscript>
<p>Please enable JavaScript</p>
</noscript>
<div style="width: 100%; padding: 20px 20px 20px 20px;" id="vis"></div>
<script type="text/javascript">
	function xhrSuccess() {
		this.callback.apply(this, this.arguments);
	}
	function xhrError() {
		console(this.statusText);
	}
	function loadFile(url, callback) {
		var xhr = new XMLHttpRequest();
		xhr.callback = callback;
		xhr.arguments = Array.prototype.slice.call(arguments, 2);
		xhr.onload = xhrSuccess;
		xhr.onerror = xhrError;
		xhr.open("GET", url, true);
		xhr.send(null);
	}
	function showHeatmap() {
		var json = JSON.parse(this.responseText);
		new morpheus.HeatMap({
			el: $("#vis"),
			dataset: morpheus.Dataset.fromJSON(json),
			columns: [
				{
					field: "Sig_Id", display: ["color"]
				},
				{
					field: "Chemical_Id", display: ["color"]
				},
				{
					field: "Chemical_Name", display: ["color"]
				},
				{
					field: "BUID", display: ["color"]
				},
				{
					field: "CAS", display: ["color"]
				},
				{
					field: "TAS", display: ["color"]
				},
				{
					field: "Carcinogenicity", display: ["color"]
				},
				{
					field: "Genotoxicity", display: ["color"]
				},
				{
					field: "Dose", display: ["color"]
				},
				{
					field: "Genotype", display: ["color"]
				}
			],
			rows: [ 
				{
					field: "Gene", display: ["text"]
				}
			],
			columnFilter: {
				filters : [{
					field : "TAS",
					type : "range",
					min : 0,
					max : 1.0
				}]
			},
			tools: [{
				
			
			}]
		});
	}
loadFile("gene_expression.json", showHeatmap);
</script>
</body>
</html>